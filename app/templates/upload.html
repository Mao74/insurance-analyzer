{% extends "base.html" %}

{% block content %}
<h1 style="margin-bottom: 2rem;">Nuova Analisi</h1>

<div class="card" style="max-width: 800px; margin: 0 auto;">
    <form id="upload-form">
        <div class="form-group">
            <label class="form-label">Ramo Assicurativo</label>
            <select name="ramo" class="form-control">
                <option value="rc_generale">RC Generale / RC Prodotti</option>
                <option value="incendio">Incendio / Property</option>
                <option value="trasporti">Trasporti / Cargo</option>
            </select>
        </div>

        <div id="dropzone" class="dropzone">
            <p style="font-size: 1.2rem; margin-bottom: 1rem;">Trascina qui il tuo PDF o clicca per selezionare</p>
            <p style="color: var(--text-light); margin-bottom: 1rem;">Max 20MB. PDF, JPG, PNG.</p>
            <input type="file" id="file-input" name="files" accept=".pdf, .jpg, .jpeg, .png" multiple
                style="display: none">
            <div id="file-name" style="font-weight: 600; color: var(--primary); display: none;"></div>
        </div>

        <!-- File List Display -->
        <div id="file-list" style="margin-top: 20px; text-align: left;">
            <!-- Files will be added here via JS -->
        </div>

        <div id="ocr-progress" style="display: none; margin-top: 20px;">
            <p>Estrazione testo e OCR in corso...</p>
            <div class="progress-bar">
                <div id="progress-fill" class="progress-fill"></div>
            </div>
        </div>

        <div style="margin-top: 2rem; text-align: right;">
            <button type="submit" class="btn btn-primary">Converti in TXT</button>
        </div>
    </form>
</div>
{% endblock %}